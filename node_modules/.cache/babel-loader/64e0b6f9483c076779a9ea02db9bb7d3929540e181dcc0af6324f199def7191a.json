{"ast":null,"code":"const API_KEY = \"5ae2e3f221c38a28845f05b61d5bacc0f4592c8e6769d47d592aae63\";\n\n// ✅ City → Latitude & Longitude (Nominatim)\nexport async function getCityCoords(city) {\n  const res = await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(city)}`, {\n    headers: {\n      \"User-Agent\": \"virtual-travel-assistant\"\n    }\n  });\n  const result = await res.json();\n  if (!result || result.length === 0) {\n    return null;\n  }\n  return {\n    lat: Number(result[0].lat),\n    lon: Number(result[0].lon)\n  };\n}\n\n// ✅ Get nearby tourist places (OpenTripMap)\n// radius MUST be in METERS\nexport async function getPlaces(lat, lon, radiusMeters) {\n  // Step 1: get nearby place IDs\n  const res = await fetch(`https://api.opentripmap.com/0.1/en/places/radius?radius=${radiusMeters}&lat=${lat}&lon=${lon}&limit=30&apikey=${API_KEY}`);\n  const data = await res.json();\n  if (!data.features) return [];\n\n  // Step 2: fetch details for each place\n  const detailedPlaces = [];\n  for (const f of data.features) {\n    const xid = f.properties.xid;\n    if (!xid) continue;\n    const detailRes = await fetch(`https://api.opentripmap.com/0.1/en/places/xid/${xid}?apikey=${API_KEY}`);\n    const detail = await detailRes.json();\n    if (detail.name && detail.point) {\n      detailedPlaces.push({\n        name: detail.name,\n        lat: detail.point.lat,\n        lon: detail.point.lon,\n        kinds: detail.kinds\n      });\n    }\n  }\n  return detailedPlaces;\n}","map":{"version":3,"names":["API_KEY","getCityCoords","city","res","fetch","encodeURIComponent","headers","result","json","length","lat","Number","lon","getPlaces","radiusMeters","data","features","detailedPlaces","f","xid","properties","detailRes","detail","name","point","push","kinds"],"sources":["C:/Users/HP/Desktop/Virtual travel assistant/src/services/openTripMap.js"],"sourcesContent":["const API_KEY = \"5ae2e3f221c38a28845f05b61d5bacc0f4592c8e6769d47d592aae63\";\r\n\r\n// ✅ City → Latitude & Longitude (Nominatim)\r\nexport async function getCityCoords(city) {\r\n  const res = await fetch(\r\n    `https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(\r\n      city\r\n    )}`,\r\n    {\r\n      headers: {\r\n        \"User-Agent\": \"virtual-travel-assistant\"\r\n      }\r\n    }\r\n  );\r\n\r\n  const result = await res.json();\r\n\r\n  if (!result || result.length === 0) {\r\n    return null;\r\n  }\r\n\r\n  return {\r\n    lat: Number(result[0].lat),\r\n    lon: Number(result[0].lon)\r\n  };\r\n}\r\n\r\n// ✅ Get nearby tourist places (OpenTripMap)\r\n// radius MUST be in METERS\r\nexport async function getPlaces(lat, lon, radiusMeters) {\r\n  // Step 1: get nearby place IDs\r\n  const res = await fetch(\r\n    `https://api.opentripmap.com/0.1/en/places/radius?radius=${radiusMeters}&lat=${lat}&lon=${lon}&limit=30&apikey=${API_KEY}`\r\n  );\r\n\r\n  const data = await res.json();\r\n  if (!data.features) return [];\r\n\r\n  // Step 2: fetch details for each place\r\n  const detailedPlaces = [];\r\n\r\n  for (const f of data.features) {\r\n    const xid = f.properties.xid;\r\n    if (!xid) continue;\r\n\r\n    const detailRes = await fetch(\r\n      `https://api.opentripmap.com/0.1/en/places/xid/${xid}?apikey=${API_KEY}`\r\n    );\r\n\r\n    const detail = await detailRes.json();\r\n\r\n    if (detail.name && detail.point) {\r\n      detailedPlaces.push({\r\n        name: detail.name,\r\n        lat: detail.point.lat,\r\n        lon: detail.point.lon,\r\n        kinds: detail.kinds\r\n      });\r\n    }\r\n  }\r\n\r\n  return detailedPlaces;\r\n}\r\n\r\n"],"mappings":"AAAA,MAAMA,OAAO,GAAG,0DAA0D;;AAE1E;AACA,OAAO,eAAeC,aAAaA,CAACC,IAAI,EAAE;EACxC,MAAMC,GAAG,GAAG,MAAMC,KAAK,CACrB,4DAA4DC,kBAAkB,CAC5EH,IACF,CAAC,EAAE,EACH;IACEI,OAAO,EAAE;MACP,YAAY,EAAE;IAChB;EACF,CACF,CAAC;EAED,MAAMC,MAAM,GAAG,MAAMJ,GAAG,CAACK,IAAI,CAAC,CAAC;EAE/B,IAAI,CAACD,MAAM,IAAIA,MAAM,CAACE,MAAM,KAAK,CAAC,EAAE;IAClC,OAAO,IAAI;EACb;EAEA,OAAO;IACLC,GAAG,EAAEC,MAAM,CAACJ,MAAM,CAAC,CAAC,CAAC,CAACG,GAAG,CAAC;IAC1BE,GAAG,EAAED,MAAM,CAACJ,MAAM,CAAC,CAAC,CAAC,CAACK,GAAG;EAC3B,CAAC;AACH;;AAEA;AACA;AACA,OAAO,eAAeC,SAASA,CAACH,GAAG,EAAEE,GAAG,EAAEE,YAAY,EAAE;EACtD;EACA,MAAMX,GAAG,GAAG,MAAMC,KAAK,CACrB,2DAA2DU,YAAY,QAAQJ,GAAG,QAAQE,GAAG,oBAAoBZ,OAAO,EAC1H,CAAC;EAED,MAAMe,IAAI,GAAG,MAAMZ,GAAG,CAACK,IAAI,CAAC,CAAC;EAC7B,IAAI,CAACO,IAAI,CAACC,QAAQ,EAAE,OAAO,EAAE;;EAE7B;EACA,MAAMC,cAAc,GAAG,EAAE;EAEzB,KAAK,MAAMC,CAAC,IAAIH,IAAI,CAACC,QAAQ,EAAE;IAC7B,MAAMG,GAAG,GAAGD,CAAC,CAACE,UAAU,CAACD,GAAG;IAC5B,IAAI,CAACA,GAAG,EAAE;IAEV,MAAME,SAAS,GAAG,MAAMjB,KAAK,CAC3B,iDAAiDe,GAAG,WAAWnB,OAAO,EACxE,CAAC;IAED,MAAMsB,MAAM,GAAG,MAAMD,SAAS,CAACb,IAAI,CAAC,CAAC;IAErC,IAAIc,MAAM,CAACC,IAAI,IAAID,MAAM,CAACE,KAAK,EAAE;MAC/BP,cAAc,CAACQ,IAAI,CAAC;QAClBF,IAAI,EAAED,MAAM,CAACC,IAAI;QACjBb,GAAG,EAAEY,MAAM,CAACE,KAAK,CAACd,GAAG;QACrBE,GAAG,EAAEU,MAAM,CAACE,KAAK,CAACZ,GAAG;QACrBc,KAAK,EAAEJ,MAAM,CAACI;MAChB,CAAC,CAAC;IACJ;EACF;EAEA,OAAOT,cAAc;AACvB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}